!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("automerge"),require("redux"),require("buffer"),require("hypercore"),require("hypercore-crypto"),require("pump"),require("random-access-idb"),require("signalhub"),require("webrtc-swarm")):"function"==typeof define&&define.amd?define(["exports","automerge","redux","buffer","hypercore","hypercore-crypto","pump","random-access-idb","signalhub","webrtc-swarm"],r):r((e=e||self).cevitxe={},e.automerge,e.redux,e.buffer,e.hypercore,e.crypto,e.pump,e.rai,e.signalhub,e.swarm)}(this,function(e,r,n,t,o,a,u,i,c,d){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r,o=o&&o.hasOwnProperty("default")?o.default:o,a=a&&a.hasOwnProperty("default")?a.default:a,u=u&&u.hasOwnProperty("default")?u.default:u,i=i&&i.hasOwnProperty("default")?i.default:i,c=c&&c.hasOwnProperty("default")?c.default:c,d=d&&d.hasOwnProperty("default")?d.default:d;var l=function(){var e=[];return{enhancer:function(r){return function(t){return function(o){var a=e.map(function(e){return e(r)});return n.compose.apply(void 0,a)(t)(o)}}},addMiddleware:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];e=[].concat(e,n)},removeMiddleware:function(r){var n=e.findIndex(function(e){return e===r});-1!==n?e=e.filter(function(e,r){return r!==n}):console.error("Middleware does not exist!",r)},resetMiddlewares:function(){e=[]}}},f=l(),s=f.enhancer,p=f.addMiddleware,y=f.removeMiddleware,h=f.resetMiddlewares,v={sign:function(e,r,n){return n(null,a.sign(e,r))},verify:function(e,r,n,t){return t(null,!0)}},g=function(){var e,r,l,f,s=function(r,n){console.log("peer",n,r),u(r,e.replicate({encrypt:!1,live:!0,upload:!0,download:!0}),r)},p=function(){return r.toString("hex")};function y(e,r,t){var o,a;return void 0!==t?(a=r,o=t):o=r,console.log("add a feed-enabled reducer here"),void 0!==a?n.createStore(e,a,o):n.createStore(e,o)}return{createFeed:function(n){if(!n.key)throw new Error("Key is required, should be XXXX in length");if(r=a.discoveryKey(t.Buffer.from(n.key)),!n.secretKey)throw new Error("Secret key is required, should be XXXX in length");l=t.Buffer.from(n.secretKey),f=n.peerHubs||["https://signalhub-jccqtwhdwc.now.sh/"];var u=i((n.databaseName||"data")+"-"+p().substr(0,12));return(e=o(function(e){return u(e)},r,{secretKey:l,valueEncoding:"utf-8",crypto:v})).on("error",function(e){return console.log(e)}),e.on("ready",function(){var n;console.log("ready",r.toString("hex")),console.log("discovery",e.discoveryKey.toString("hex")),n=c(p(),f),d(n).on("peer",s)}),e.createReadStream({live:!0}).on("data",function(e){try{var r=JSON.parse(e);console.log("onData",r)}catch(r){console.log("feed read error",r),console.log("feed stream returned an unknown value",e)}}),{createStore:y}}}}().createFeed,w=function(e,n){var t=r.save(n);localStorage.setItem(e,t)};e.APPLY_CHANGE="cevitxe/APPLY_CHANGE",e.actions={applyChange:function(e){return{type:"cevitxe/APPLY_CHANGE",payload:{change:e}}}},e.adaptReducer=function(e){return function(n,t){var o=t.type,a=t.payload;switch(o){case"cevitxe/APPLY_CHANGE":console.log("APPLY_CHANGE REDUCER!!!!",a);var u=r.applyChanges(n,[a.change]);return console.log(u),u;default:var i=o+": "+JSON.stringify(a),c=e({type:o,payload:a});return c&&n?r.change(n,i,c):n}}},e.addMiddleware=p,e.cevitxeMiddleware=s,e.createDynamicMiddlewares=l,e.createFeed=g,e.initialize=function(e){return r.change(r.init(),"initialize",function(r){for(var n in e)r[n]=e[n]})},e.load=function(e){var n=localStorage.getItem(e);return n?r.load(n):null},e.middleware=function(e){var r=e.key;return function(e){return function(n){return function(t){var o=n(t),a=e.getState();return w(r,a),o}}}},e.mockCrypto=v,e.removeMiddleware=y,e.resetMiddlewares=h,e.save=w});
//# sourceMappingURL=cevitxe.umd.production.js.map
